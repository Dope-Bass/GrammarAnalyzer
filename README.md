# GrammarAnalyzer

## Как пользоваться?

Есть два стула

#### Номер один

Можно ипортировать модуль `c_analyzer` из одноименного файла, а потом пользоваться всеми прелестями класса `Analyzer`, который в этом модуле описан. Инициализировать класс для работы с ним нужно разве что предоставив ему название файла, в котором лежит текст. Желательно, чтобы он существовал, потому что проверки я не делал.

Прелести там всего две:

Метод `make_sense`, который делает основную работу и возвращает список из словарей, каждый из которых имеет вид:

`{index: [word, word_normal_form, [OpencorporaTag, role]]}`

Количество элементов в третьем члене списка может быть больше чем два. Это результат моей тупости, поэтому учитывать стоит только первые два элемента - тэг слова и его роль соответственно. И элементов во всем списке может быть больше трех по аналогичной причине. Учитывать только первые три

Также в классе есть такое поле как `mrph`. Оно дает доступ к библиотеке грамматического разбора слов - `py_morphy`. Будет нужно в тот момент, когда потребуется разобрать тэг слова на составляющие типа род, падеж и подобное

Ролью слова, помимо стандартных - подлежащее. сказуемое и т.д., может быть такая штука, как `неизвестно`. Такой ролью обладают знаки препинания, частицы и то, что я не смог разобрать (-_- )

Роли можно достать из файла `defines.py`

#### Номер два

В основной директории лежит скрипт `magic.py`. Можно запустить его через питоновский ехе файл, лежащий в папке `venv\Scripts`, передав в качестве параметров название файла с текстом и опцию по записи или не записи в файл

`magic.py -t test.txt -f res.txt`

Если параметр `f` не передается, будет открыт файл со стандартным названием `res.txt` и туда запишется все.
Если передать параметру букву `n`,  результат выведется в консоль.
Если передать параметру имя файла, то он его откроет и запишет туда.


## Принцип работы с сервером

Запускать сервер нужно находясь в директории `~/server/` с помощью команды `python manage.py runserver`

Сервак будет запущен на локальном хосте по адресу `http://127.0.0.1:8000/`

Внутри него есть две подстраницы `~/analyze/text` и `~/analyze/words`. Это страницы для работы с базой данных. 

Первая поддерживает запросы GET/POST. При запросе данных из базы будет выдан JSON -- `{"text": actual_text}`. 
Для записи данных нужно также отправить JSON -- `{"text": "actual_text"}`. В базу с текстом будет записан текст, в базу слов будут записаны слова и их характеристики.

Получить данные о словах можно, обратившись ко второй странице. Она поддерживает только GET запрос. При записи нового текста, все слова будут потерты и новые записаны на их место. Будет выдан JSON типа 
`
        {
            'word': word,
            'normal_form': normal_form,
            'speech_part': speech_part,
            'case': case,
            'gender': gender,
            'number': number,
            'person': pers,
            'voice': voice,
            'role': role
        }
`
Текст также будет перезаписан
